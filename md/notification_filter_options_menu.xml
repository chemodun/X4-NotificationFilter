<?xml version="1.0" encoding="utf-8"?>
<mdscript name="Notification_Filter_Options_Menu" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <cues>
    <cue name="Init" instantiate="false" version="1">
      <actions>
      </actions>
      <cues>
        <cue name="Register_Menu" instantiate="true" version="1">
          <conditions>
            <event_cue_signalled cue="md.Simple_Menu_API.Reloaded" />
          </conditions>
          <actions>
            <debug_text text="'NotificationFilter Options: Registering Options Menus'" context="false" filter="scripts" />
            <include_actions ref="md.Notification_Filter.DefaultFilters" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
              param="table[
                $id      = 'Notification_Filter_options_menu',
                $columns = 8,
                $title   = 'Notification Filter Options',
                $onOpen  = Notification_Filter_Options_Menu,
              ]" />
          </actions>
        </cue>

        <cue name="Notification_Filter_Options_Menu" instantiate="true" version="1">
          <conditions>
            <event_cue_signalled />
          </conditions>
          <actions>
            <debug_text text="'Notification Filter Options: Opening Notification Filter Options Menu'" context="false" filter="scripts" />
            <include_actions ref="md.Notification_Filter.DefaultFilters" />
            <set_value name="$filters" exact="@player.entity.$notificationFilters" />
            <debug_text
              text="'NotificationFilter Options: Current filters: %s' . [$filters]"
              context="false" filter="scripts" />
            <set_value name="$debugLevelCurrentIndex" exact="$debugLevelIndexes.indexof.{$commonData.$debugLevel}" />
            <do_if value="$debugLevelCurrentIndex == 0">
              <set_value name="$debugLevelCurrentIndex" exact="1" />
            </do_if>
            <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text"
              param="table[
                $col = 1,
                $colSpan = 8,
                $text = {1972092412, 90001},
              ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_CheckBox"
              param="table[
                  $id = 'pilot_academy_notifications',
                  $checked = @$commonData.$notificationsEnabled,
                  $col = 2,
                  $width = 'Helper.standardButtonHeight',
                  $height = 'Helper.standardButtonHeight',
                  $onClick = Pilot_Academy_On_Checkbox_Change
                ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text"
              param="table[
                $col = 3,
                $colSpan = 6,
                $text = {1001, 7743},
              ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_CheckBox"
              param="table[
                  $id = 'pilot_academy_logbook',
                  $checked = @$commonData.$logbookEnabled,
                  $col = 2,
                  $width = 'Helper.standardButtonHeight',
                  $height = 'Helper.standardButtonHeight',
                  $onClick = Pilot_Academy_On_Checkbox_Change
                ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text"
              param="table[
                $col = 3,
                $colSpan = 6,
                $text = {1001, 5700},
              ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Text"
              param="table[
                $col = 1,
                $colSpan = 5,
                $text = {1972092412, 90009},
              ]" />
            <signal_cue_instantly cue="md.Simple_Menu_API.Make_Dropdown"
              param="table[
                $col = 6,
                $colSpan = 3,
                $options = $debugLevelOptions,
                $startOption = $debugLevelCurrentIndex,
                $onDropDownConfirmed = Pilot_Academy_Handle_Debug_Level,
                ]" />
            <remove_value name="$filters" />
            <remove_value name="$debugLevelOptions" />
            <remove_value name="$debugLevelCurrentIndex" />
          </actions>
        </cue>

      </cues>
    </cue>


  </cues>
</mdscript>